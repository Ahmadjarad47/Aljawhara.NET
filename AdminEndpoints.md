# روابط API الخاصة بالأدمن فقط

## نظرة عامة
هذا الملف يحدد جميع الروابط (Endpoints) في API التي تتطلب صلاحيات الأدمن فقط. هذه الروابط محمية بـ `[Authorize(Roles = "Admin")]` أو `[Authorize(Roles = "Admin,User")]`.

---

## 1. إدارة الفئات (Categories)

### إنشاء فئة جديدة
- **الرابط:** `POST /api/categories`
- **الوصف:** إنشاء فئة جديدة
- **المتطلبات:** صلاحيات الأدمن
- **المعاملات:** `CategoryCreateDto`

### تحديث فئة موجودة
- **الرابط:** `PUT /api/categories/{id}`
- **الوصف:** تحديث فئة موجودة
- **المتطلبات:** صلاحيات الأدمن
- **المعاملات:** `CategoryUpdateDto`

### حذف فئة
- **الرابط:** `DELETE /api/categories/{id}`
- **الوصف:** حذف فئة
- **المتطلبات:** صلاحيات الأدمن

### إنشاء فئة فرعية جديدة
- **الرابط:** `POST /api/categories/subcategories`
- **الوصف:** إنشاء فئة فرعية جديدة
- **المتطلبات:** صلاحيات الأدمن
- **المعاملات:** `SubCategoryCreateDto`

### تحديث فئة فرعية
- **الرابط:** `PUT /api/categories/subcategories/{id}`
- **الوصف:** تحديث فئة فرعية موجودة
- **المتطلبات:** صلاحيات الأدمن
- **المعاملات:** `SubCategoryUpdateDto`

### حذف فئة فرعية
- **الرابط:** `DELETE /api/categories/subcategories/{id}`
- **الوصف:** حذف فئة فرعية
- **المتطلبات:** صلاحيات الأدمن

---

## 2. إدارة المنتجات (Products)

### إنشاء منتج جديد
- **الرابط:** `POST /api/products`
- **الوصف:** إنشاء منتج جديد
- **المتطلبات:** صلاحيات الأدمن
- **المعاملات:** `ProductCreateDto`

### تحديث منتج موجود
- **الرابط:** `PUT /api/products/{id}`
- **الوصف:** تحديث منتج موجود
- **المتطلبات:** صلاحيات الأدمن
- **المعاملات:** `ProductUpdateDto`

### حذف منتج
- **الرابط:** `DELETE /api/products/{id}`
- **الوصف:** حذف منتج
- **المتطلبات:** صلاحيات الأدمن

---

## 3. إدارة الطلبات (Orders)

### عرض جميع الطلبات
- **الرابط:** `GET /api/orders`
- **الوصف:** عرض جميع الطلبات مع إمكانية التصفية حسب الحالة
- **المتطلبات:** صلاحيات الأدمن
- **المعاملات الاختيارية:** `status` (حالة الطلب)

### تحديث حالة الطلب
- **الرابط:** `PUT /api/orders/{id}/status`
- **الوصف:** تحديث حالة الطلب
- **المتطلبات:** صلاحيات الأدمن أو المستخدم
- **المعاملات:** `OrderUpdateStatusDto`

### إحصائيات الطلبات
- **الرابط:** `GET /api/orders/statistics`
- **الوصف:** عرض إحصائيات الطلبات
- **المتطلبات:** صلاحيات الأدمن أو المستخدم

### إجمالي المبيعات
- **الرابط:** `GET /api/orders/sales`
- **الوصف:** عرض إجمالي المبيعات مع إمكانية التصفية حسب التاريخ
- **المتطلبات:** صلاحيات الأدمن أو المستخدم
- **المعاملات الاختيارية:** `startDate`, `endDate`

---

## 4. الروابط المشتركة (للأدمن والمستخدم)

### عرض طلبات المستخدم
- **الرابط:** `GET /api/orders/user/{userId}`
- **الوصف:** عرض طلبات مستخدم محدد
- **المتطلبات:** صلاحيات الأدمن أو المستخدم (مع التحقق من الملكية)

### عرض طلباتي
- **الرابط:** `GET /api/orders/my-orders`
- **الوصف:** عرض طلبات المستخدم الحالي
- **المتطلبات:** صلاحيات الأدمن أو المستخدم

### إلغاء طلب
- **الرابط:** `PUT /api/orders/{id}/cancel`
- **الوصف:** إلغاء طلب
- **المتطلبات:** صلاحيات الأدمن أو المستخدم

---

## ملاحظات مهمة

1. **المصادقة:** جميع هذه الروابط تتطلب مصادقة صحيحة (JWT Token)
2. **الصلاحيات:** يجب أن يكون المستخدم لديه دور "Admin" أو "User" حسب الرابط
3. **التحقق من الملكية:** بعض الروابط تتطلب التحقق من أن المستخدم يملك المورد المطلوب
4. **معالجة الأخطاء:** جميع الروابط تحتوي على معالجة شاملة للأخطاء
5. **التحقق من البيانات:** يتم التحقق من صحة البيانات المرسلة قبل المعالجة

---

## أمثلة على الاستخدام

### إنشاء فئة جديدة
```http
POST /api/categories
Authorization: Bearer {JWT_TOKEN}
Content-Type: application/json

{
  "name": "إلكترونيات",
  "description": "فئة الأجهزة الإلكترونية"
}
```

### تحديث حالة طلب
```http
PUT /api/orders/123/status
Authorization: Bearer {JWT_TOKEN}
Content-Type: application/json

{
  "id": 123,
  "status": "Shipped"
}
```

### حذف منتج
```http
DELETE /api/products/456
Authorization: Bearer {JWT_TOKEN}
```
